"use strict";define("Wiki/PageViews",["require","exports","react","VSS/Core/Util/String","VSS/Platform/Layout","VSSUI/Icon"],(function(e,t,i,s,n,a){var o,r;o=t[r="Resources"]={},t[r].PageViewsText="{0} visits in last 30 days",t[r].OnePageViewText="1 visit in last 30 days",function(e){t.PageViews={};class r extends n.VssComponent{constructor(e,t){super(e,t),this.state={}}componentDidMount(){super.componentDidMount(),this._loadPageViews()}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.props.pageId!==e.pageId&&this._loadPageViews()}render(){const{viewCount:e}=this.state;return void 0!==e?i.createElement("div",{className:"page-view-section flex-row font-size-mm"},i.createElement(a.Icon,{className:"padding-right-8",iconName:"EntryView",size:"medium"}),i.createElement("span",null,1===e?o.OnePageViewText:(0,s.format)(o.PageViewsText,e))):null}_loadPageViews(){const e=this.context.pageContext.getRestClient("IWikiRestClient");this.trackPromise(e.getPageData(this.props.projectId,this.props.wikiId,this.props.pageId,30)).promise.then((e=>{let t=0;if(e.viewStats)for(let i=0;i<e.viewStats.length;i++)t+=e.viewStats[i].count;this.setState({viewCount:t})}))}}n.VssComponent.register("Wiki.WikiPageViews",r)}()}),["Resources","PageViews"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-wiki-web.wiki-page-views-content"}}));