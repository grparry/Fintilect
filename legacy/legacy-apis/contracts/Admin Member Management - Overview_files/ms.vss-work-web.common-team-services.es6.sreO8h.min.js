"use strict";define("Wit/Common/TeamServices",["require","exports","VSS/Core/Observable","VSS/Platform/Context","Wit/Clients/Work/RestClient/Work"],(function(e,t,a,i,s){!function(e){var r;t.TeamSettingsService={},function(e){e.TeamSettingsDataProvider="ms.vss-work-web.new-team-wit-settings-data-provider"}(r||(r={}));class n extends i.VssService{constructor(){super(...arguments),this.updateTeamSettings=(e,t)=>{var a,i;const r=(0,s.getWorkClient)(this.pageContext),n=this.pageContext.getService("ITfsPageService").getData(),o=null!==(i=null===(a=null==n?void 0:n.project)||void 0===a?void 0:a.id)&&void 0!==i?i:"";return r.updateTeamSettings(e,{teamId:t,projectId:o}).then((e=>{var t;(null===(t=this.teamDataCache)||void 0===t?void 0:t.value)&&(this.teamDataCache.value=Object.assign(Object.assign({},this.teamDataCache.value),{backlogVisibilities:e.backlogVisibilities,weekends:{canEditWeekends:this.teamDataCache.value.weekends.canEditWeekends,days:c(e.workingDays)},bugsBehavior:Number(e.bugsBehavior)}))}))},this.teamSettingsCache=new Map,this.getTeamSettingsById=(e,t)=>{if(!t&&this.teamSettingsCache.has(e))return Promise.resolve(this.teamSettingsCache.get(e));return this.pageContext.getService("IVssContributionService").getDataAsync(r.TeamSettingsDataProvider,{teamId:e},t)}}_serviceStart(e){super._serviceStart(e)}getTeamSettings(e){var t;if(!e&&(null===(t=this.teamDataCache)||void 0===t?void 0:t.value))return Promise.resolve(this.teamDataCache.value);if(e||!this.teamDataPromise){const t=this.pageContext.getService("IVssContributionService");this.teamDataPromise=t.getDataAsync(r.TeamSettingsDataProvider,{},e).then((e=>(this.teamDataCache?this.teamDataCache.value=e:this.teamDataCache=new a.ObservableValue(e),e)))}return this.teamDataPromise}getTeamSettingsObservable(e){return!e&&this.teamDataCache||(this.teamDataCache||(this.teamDataCache=new a.ObservableValue(void 0)),this.getTeamSettings(e)),this.teamDataCache}}function c(e){const t={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0};return e.forEach((e=>t[e]=!1)),Object.keys(t).filter((e=>t[Number(e)])).map((e=>Number(e)))}i.Services.add("ITeamSettingsService",{serviceFactory:n})}()}),["TeamSettingsService"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-work-web.common-team-services"}}));